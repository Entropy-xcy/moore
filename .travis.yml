language: rust
rust:
  - stable
  - beta
  - nightly
  # minimum supported version
  - "1.15.0"
matrix:
  allow_failures:
    - rust: nightly

# necessary for `travis-cargo coveralls --no-sudo`
addons:
  apt:
    packages:
      - libcurl4-openssl-dev
      - libelf-dev
      - libdw-dev
      - binutils-dev # optional: only required for the --verify flag of coveralls

before_script:
  - |
    pip install "travis-cargo<0.2" --user &&
    export PATH=$HOME/.local/bin:$PATH
  # - git clone --depth 1 https://github.com/pulp-platform/pulpino.git pulpino

script:
  - |
    travis-cargo build &&
    travis-cargo test -- --all &&
    travis-cargo bench &&
    travis-cargo --only stable doc
  # - ./compile_pulpino.sh

after_success:
  # - travis-cargo --only stable doc-upload
  # - travis-cargo --only nightly coveralls --no-sudo --verify
